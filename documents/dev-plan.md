
# Aqsh Insights Development Plan

現在の実装状況（Ver. 2.9相当）を踏まえた、今後の開発ロードマップと改善計画です。

## 1. 現状分析 (Current Status)

### 実装済み機能
*   **基本シミュレーション**: 企画入力 → 仮想顧客（ペルソナ）生成 → セールスピッチ → 並列対話シミュレーション → 分析レポート。
*   **高度なインタラクション**:
    *   **Strict Decision Making**: 忖度を排除し、金銭感覚と優先順位に基づいた厳格な意思決定ロジック。
    *   **Competitor Grounding**: Google Searchを用いたリアルタイム競合リサーチとペルソナへの知識注入。
    *   **Visual Grounding**: 画像アップロードによる、デザイン・UI・パッケージの視覚的検証。
    *   **Price Sensitivity (WTP)**: 各ペルソナの「支払意向額」および「提示価格を払うための条件（Gap Analysis）」の出力。
    *   **Direct Interview**: 特定の仮想顧客への深掘りチャット機能。
    *   **Group Discussion**: 仮想顧客間の意見交換と相互作用のシミュレーション。
*   **戦略的分析・可視化 (Strategic Analytics)**:
    *   **CPF/PSF/PMF Framework**: 顧客課題・解決策・市場適合の3つのフィット検証に基づく分析ロジック。
    *   **Pivot Planning**: 分析結果から、購入率100%を目指すための具体的な改善企画書（Markdown）を自動生成する機能。
    *   **5-Axis Detailed Scoring**: 「魅力度・新規性・理解度・関連性・コスパ」の5軸レーダーチャートによる商品力分析。
    *   **Competitive Positioning Map**: 競合他社と比較した市場内の立ち位置を示す散布図（動的軸生成）。
    *   **Visual Analytics**: Rechartsを用いた受容率、感情推移、属性別受容性のグラフ化。
*   **UX改善機能**:
    *   **Simple Mobile UI**: スマートフォンでメール確認レベルのスキルでも使える、直感的な操作性。
    *   **Persona Templates**: スタートアップ、中小企業、大企業経営者など15種類以上の詳細プリセット。
    *   **Cost Visualization**: リアルタイムコスト表示。
    *   **Full Export**: PDFおよびMarkdown形式での完全なレポート（詳細ログ含む）の出力。
*   **システム堅牢性**:
    *   **Hybrid Concurrency**: `Pro`モデル（高精度・低速）と`Flash`モデル（高速・並列）でレートリミッターを分離し、シミュレーション速度を劇的に向上。
    *   **Robust Error Handling**: モデルごとの適切なリトライ戦略とタイムアウト制御。
    *   **Modern State Management**: `Context API` + `useReducer` による堅牢な状態管理と、コンポーネント分割による保守性の向上。

### 課題・改善点
*   **ペルソナの多様性**: 日本特有のニッチな属性（例：地方公務員、特定業界の職人など）の再現性は向上したが、さらなるバリエーションが必要。
*   **入力サポート**: 長文入力時のUX改善や、URLからの自動抽出など。

---

## 2. 短期開発計画 (Short-term: 1-2 Months)
**目標: UXの洗練と入力負荷の軽減**

### 2.1 マルチモーダル入力の強化
*   **概要**: 画像だけでなく、URL入力への対応。
*   **実装内容**:
    *   商品LPのURLを入力すると、スクレイピング（またはGeminiのブラウジング機能）して内容を自動抽出する機能。

### 2.2 プロンプト調整機能 (Prompt Tuning)
*   **概要**: ユーザーが生成結果に対して「もっと辛口にしてほしい」「もっと若者言葉で」といった微調整を行える機能。
*   **実装内容**: シミュレーション再実行時に、グローバルなトーン＆マナー指示を追加できるUI。

---

## 3. 中期開発計画 (Mid-term: 3-6 Months)
**目標: Phase 2「共創・マルチモーダル」の実装**

### 3.1 マルチモーダル・フィードバック (Audio Feedback)
*   **概要**: テキストだけでなく、ペルソナの「肉声」でフィードバックを聞けるようにする。
*   **実装内容**:
    *   Gemini 2.5 Flashの音声生成機能、またはGoogle Cloud TTS APIとの連携。
    *   ペルソナの性別・年齢に合わせた声質の自動割り当て。
    *   「心の声」を再生するボタンの実装。

---

## 4. 長期構想 (Long-term: 6 Months+)
**目標: プラットフォーム化**

*   **クラウド同期 & チーム機能**: LocalStorageから脱却し、Firebase/Supabase等を用いたクラウド保存。チームメンバーとの結果共有。
*   **ペルソナライブラリ**: ユーザーが作成したカスタムペルソナを保存・共有できるライブラリ機能。
*   **API連携**: SlackやDiscordから簡易的に壁打ちできるBot化。

---

## 5. 技術的負債の解消 (Technical Refactoring)

*   **コンポーネント分割 (Decomposition)**: `App.tsx` の肥大化を解消。`Sidebar`, `Dashboard`, `Visualizer` ディレクトリ配下へ機能を切り出し、保守性を向上（完了）。
*   **状態管理の刷新 (State Management)**: `useReducer` と `Context API` (`SimulationContext`, `ThemeContext`) を導入。`useSimulation` フックを廃止し、Propsのバケツリレーを解消（完了）。
*   **並列処理の最適化**: `Pro` / `Flash` 別のレートリミッター導入によるスループット向上（完了）。
*   **可視化ロジックの分離**: `analyticsUtils.ts` への切り出しによるViewコンポーネントの軽量化（完了）。
*   **プロンプト管理**: 現在コード内にハードコードされているプロンプトを、設定ファイルや外部CMSから読み込めるように分離する（継続課題）。
*   **型定義の厳格化**: `any` 型の使用箇所を減らし、Zod等を用いたランタイムバリデーションを強化する（継続課題）。
